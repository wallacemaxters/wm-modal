angular.module("wm.modal",[]).directive("wmModal",function(){return{restrict:"EA",transclude:true,replace:true,template:'<div class="wm-modal"><div class="modal-container" ng-class="containerClass" ng-style="{height: modalHeight, width: modalWidth}" ng-click="$event.stopPropagation()" ng-transclude></div></div>',scope:{modalHeight:"@",modalWidth:"@",containerClass:"@"}};
}).service("$wmModal",["$compile","$document","$rootScope","$timeout","$controller","$q",function(e,d,j,c,a,h){var b,l,g,k,i,f;f=this;i={};f.open=function(m){m=angular.isObject(m)?m:{};
g=false;i.result=h.defer();f.result=i.result.promise;l=j.$new();b=angular.element("<wm-modal></wm-modal>");angular.extend(l,m.scope);a(m.controller,angular.extend({$scope:l,$wmModalInstance:f,},m.locals));
b.attr({"modal-height":m.height,"modal-width":m.width,"container-class":m.containerClass,});if(m.templateUrl){var n=angular.element("<div></div>").attr({"ng-include":"'"+m.templateUrl+"'"});
b.append(n);}else{if(m.template){b.append(m.template);}}b=e(b)(l);m.clickout&&b.on("click",function(){f.cancel();});d.find("body").append(b);return f;};
k=function(){if(g){return;}b.addClass("closing");c(function(){b.remove();},200);l.$destroy();g=true;};f.close=function(){k.call(f);i.result.resolve();return f;
};f.cancel=function(){k.call(f);i.result.reject();return f;};}]);